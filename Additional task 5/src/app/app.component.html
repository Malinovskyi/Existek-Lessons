<form class="form" [formGroup]="form">
  <h2 class="form-title">Add Products:</h2>

  <div formArrayName="productList">
    <div *ngFor="let productForm of productList.controls; index as i">
      <ng-container [formGroupName]="i">
        <div class="form-container">
          <div class="form-container__title-input">
            <input
              formControlName="name"
              type="text"
              placeholder="Product name"
            />
            <span
              class="error"
              *ngIf="
                productForm.get('name')?.errors &&
                productForm.get('name')?.hasError('required') &&
                productForm.get('name')?.touched
              "
            >
              required</span
            >
          </div>
          <div class="form-container__product-input">
            <input
              formControlName="product"
              type="number"
              placeholder="Amount"
            />

            <span
              class="error"
              *ngIf="
                productForm.get('product')?.errors &&
                productForm.get('product')?.hasError('required') &&
                productForm.get('product')?.touched
              "
            >
              required</span
            >
          </div>
          <button (click)="remove(i)" type="button" class="form-button">
            remove
          </button>
        </div>
      </ng-container>
    </div>
  </div>

  <button type="button" class="form-button add" (click)="addLesson()">
    Add new item
  </button>
  <button
    [disabled]="form.invalid"
    type="button"
    class="form-button"
    (click)="createList()"
  >
    Create product list
  </button>
</form>
